window.xpagination=function(){var e=function(e){this.numPerPage=e.numPerPage||[10,20,40,100],this.el=e.el,this.fontShowNo=e.fontShowNo||8,this.position=e.position||"left",this.callback=e.callback||function(){console.log("请传入回调")},this.theme=e.theme||0,this.scrollTo=e.scrollTo||0,this.totalPageNo=1,this.curPageNo=1,this.totalRecord=0,this.xPaginationWrap=null,this.onOff=!0,this.curNumPerPage=this.numPerPage[0],this.totalThemeNo=2,this.inputValue="",this.init()};return e.prototype={init:function(){this.xPaginationWrap=document.getElementById(this.el),this.renderHtml()},update:function(e,t){this.totalPageNo=e,this.totalRecord=t,this.onOff=!0,this.setPos(this.curPageNo)},renderHtml:function(){this.onOff&&(this.onOff=!1,this.callback(this.curPageNo,this.curNumPerPage)),this.setPos(this.curPageNo)},clickEvent:function(){function e(e){document.getElementsByTagName("body")[0].scrollTop=e}for(var t=document.querySelectorAll(".xp_page_num_btn"),i=document.querySelector(".xp_page_home_btn"),s=document.querySelector(".xp_page_lastpage_btn"),a=document.querySelector(".xp_page_prev_btn"),n=document.querySelector(".xp_page_next_btn"),o=this.xPaginationWrap.querySelector(".submit"),l=this,r=0;r<t.length;r++)t[r].addEventListener("click",function(){e(l.scrollTo),l.curPageNo=this.dataset.pageno,l.renderHtml()});i.addEventListener("click",function(){e(l.scrollTo),l.curPageNo=1,l.renderHtml()}),s.addEventListener("click",function(){e(l.scrollTo),l.curPageNo=l.totalPageNo,l.renderHtml()}),a.addEventListener("click",function(){e(l.scrollTo),--l.curPageNo<1&&(l.curPageNo=1),l.renderHtml()}),n.addEventListener("click",function(){e(l.scrollTo),console.log(l.curPageNo),++l.curPageNo>l.totalPageNo&&(l.curPageNo=l.totalPageNo),l.renderHtml()}),o.addEventListener("click",function(t){e(l.scrollTo);var i=t.currentTarget,s=parseInt(i.previousElementSibling.value);0!=s&&s<=l.totalPageNo&&(l.inputValue=s,l.curPageNo=s,l.renderHtml())})},setPos:function(e){function t(e){r+=e+1==i?'<div class="xp_single_page_btn xp_page_num_btn current" data-pageno="'+(n+1)+'">'+(n+1)+"</div>":'<div class="xp_single_page_btn xp_page_num_btn" data-pageno="'+(n+1)+'">'+(n+1)+"</div>"}for(var i=parseInt(e),s="fLeft",a="",n=0;n<this.totalThemeNo;n++)n==this.theme&&(a="theme"+n);"right"==this.position&&(s="fRight");var o=document.createElement("div");o.className="xp_container clearFix "+a;var l='<div class="xp_left '+s+'"><div class="fLeft">每页</div><div id="xSelect" class="xselect fLeft"><span>'+this.curNumPerPage+'</span><ul class="dropdown">';this.numPerPage.forEach(function(e,t){l+="<li>"+e+"</li>"}),l+='</ul></div><div class="fLeft">条数据&nbsp;共<span class="total_record">'+this.totalRecord+'</span>条数据，共<span class="total_page">'+this.totalPageNo+"</span>页。</div></div>";var r='<div class="xp_right '+s+'"><div class="xp_single_page_btn xp_page_home_btn">首页</div><div class="xp_single_page_btn xp_page_prev_btn">&lt;</div>';if(this.fontShowNo+1>this.totalPageNo)for(n=0;n<this.totalPageNo;n++)t(n);else{var c=Math.ceil((this.fontShowNo+1-3)/2),p=this.fontShowNo+1-3-c;if(i-c>1&&i+p<this.totalPageNo){r+='<div class="xp_single_page_btn xp_page_ellipsis_btn">...</div>';for(n=i-c-1;n<i+p;n++)t(n);r+='<div class="xp_single_page_btn xp_page_ellipsis_btn">...</div>'}else if(i-c<=1){for(n=0;n<this.fontShowNo;n++)t(n);r+='<div class="xp_single_page_btn xp_page_ellipsis_btn">...</div>'}else if(i+p>=this.totalPageNo){r+='<div class="xp_single_page_btn xp_page_ellipsis_btn">...</div>';for(n=this.totalPageNo-this.fontShowNo;n<this.totalPageNo;n++)t(n)}}r+='<div class="xp_single_page_btn xp_page_next_btn">&gt;</div><div class="xp_single_page_btn xp_page_lastpage_btn">尾页</div></div>';var g='<div class="xp_redirect_part '+s+'">到<input type="text" value="'+this.inputValue+'">页<span class="submit">确定</span></div>',u="";"right"==this.position?u=g+r+l:"left"==this.position&&(u=l+r+g),o.innerHTML=u,this.xPaginationWrap.innerHTML="",this.xPaginationWrap.appendChild(o),this.clickEvent(),this.selectInit()},selectInit:function(){var e=this,t=document.getElementById("xSelect"),i=t.querySelectorAll("li"),s=t.querySelector("span");t.addEventListener("click",function(t){t.stopPropagation();document.querySelectorAll(".xselect");e.toggleClass(this,"active")});for(var a=0;a<i.length;a++)i[a].addEventListener("click",function(){e.curNumPerPage=this.innerHTML,s.innerHTML!=e.curNumPerPage&&(s.innerHTML=e.curNumPerPage,e.removeClass(s.parentNode,"active"),e.curPageNo=1,e.renderHtml())})},hasClass:function(e,t){var i=e.className.split(/\s+/);x=0;for(x in i)if(i[x]==t)return!0;return!1},removeClass:function(e,t){if(this.hasClass(e,t)){var i=" "+e.className+" ";i=i.replace(/(\s+)/gi," "),removed=i.replace(" "+t+" "," "),removed=removed.replace(/(^\s+)|(\s+$)/g,""),e.className=removed}},toggleClass:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},siblingElems:function(e){for(var t=[],i=e;e=e.previousSibling;)1==e.nodeType&&t.push(e);for(var e=i;e=e.nextSibling;)1==e.nodeType&&t.push(e)}},e}();